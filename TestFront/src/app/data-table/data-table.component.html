<table class="table table-striped table-bordered table-hover mb-2">
  <thead class="thead-dark">
    <tr>
      <th>#</th>
      <th *ngFor="let field of fieldNames; index as i" (click)="toggleSortFor(i)" style="cursor: pointer; user-select: none;">
        {{ field }}
        <i class="fas fa-sort-amount-down-alt mr-2" *ngIf="sortOptions[i].sort === 'asc'"></i>
        <i class="fas fa-sort-amount-down mr-2" *ngIf="sortOptions[i].sort === 'desc'"></i>
      </th>
      <th class="text-center" *ngIf="activeDeactive()">فعال/غیرفعال</th>
      <th class="text-center">ویرایش - حذف</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngIf="searchField">
      <th><i class="fas fa-search"></i></th>
      <td *ngFor="let f of fieldNames">
        <input type="text" class="form-control form-control-sm" placeholder="جستجو">
      </td>
      <td *ngIf="activeDeactive()"></td>
      <td></td>
    </tr>
    <ng-template [ngIf]="!loading && records.length !== 0">
      <tr *ngFor="let record of records; let i = index">
        <th>{{ i+1 }}</th>
        <td *ngFor="let field of recordFields(record)">
          {{ field }}
        </td>
        <td class="status" *ngIf="activeDeactive()">
          <div class="d-flex justify-content-center align-items-center">
            <input type="checkbox" class="slide-toggle" title="فعال/غیر فعال" [(ngModel)]="record.active" (change)="toggleActive(i)">
          </div>
        </td>
        <td class="py-2 edit">
          <div class="d-flex justify-content-center align-items-center">
            <button class="btn btn-sm btn-warning ml-2" (click)="edit(i)">
              ویرایش
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn btn-danger btn-sm" (click)="remove(i)">
              حذف
              <i class="fas fa-times-circle"></i>
            </button>
          </div>
        </td>
      </tr>
    </ng-template>
  </tbody>
</table>
<div class="mr-2 mb-2 text-danger" *ngIf="!loading && loadingFailed">
  <i class="fas fa-exclamation-triangle"></i>
  <span class="message mr-1 font-weight-bold">خطا در برقراری ارتباط با سرور</span>
</div>
<div class="mr-2 mb-2" *ngIf="!loading && records.length === 0 && !loadingFailed">
  <span class="message text-muted font-weight-bold">موردی یافت نشد</span>
</div>
<div class="mr-2 mb-2 d-flex align-items-center" *ngIf="loading">
  <app-loading-spinner-bars style="height: 25px;"></app-loading-spinner-bars>
  <p class="message my-auto font-italic mr-1 text-muted">در حال بارگذاری</p>
</div>
<app-pagination></app-pagination>
